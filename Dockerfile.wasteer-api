FROM node:22-alpine

WORKDIR /app

# Enable Corepack for Yarn 4
RUN corepack enable

# Copy everything
COPY . .

# Install dependencies
RUN yarn install

# Build TypeScript
RUN yarn build

# Expose API port
EXPOSE 4000

# Start Wasteer API
CMD ["node", "dist/api/server.js"]

